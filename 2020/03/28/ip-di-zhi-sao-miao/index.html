
<!DOCTYPE html>
<html lang="zh-CN" class="loading">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>IP地址扫描 - duan</title>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate" />
    <meta name="keywords" content="Fechin,"> 
    <meta name="description" content="IP地址扫描———多线程和单线程布局界面及代码
界面如下

&amp;lt;Window x:Class=&#34;IP地址扫描.MainWindow&#34;
        xmlns=&#34;http://schemas.,"> 
    <meta name="author" content="duanqiao"> 
    <link rel="alternative" href="atom.xml" title="duan" type="application/atom+xml"> 
    <link rel="icon" href="/img/favicon.png"> 
    
    
<link rel="stylesheet" href="/css/diaspora.css">

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
         (adsbygoogle = window.adsbygoogle || []).push({
              google_ad_client: "ca-pub-8691406134231910",
              enable_page_level_ads: true
         });
    </script>
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
<meta name="generator" content="Hexo 4.2.0"><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>

<body class="loading">
    <span id="config-title" style="display:none">duan</span>
    <div id="loader"></div>
    <div id="single">
    <div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <a class="iconfont icon-home image-icon" href="javascript:;" data-url="https://www.duanqyt.xyz"></a>
    <div title="播放/暂停" class="iconfont icon-play"></div>
    <h3 class="subtitle">IP地址扫描</h3>
    <div class="social">
        <div>
            <div class="share">
                <a title="获取二维码" class="iconfont icon-scan" href="javascript:;"></a>
            </div>
            <div id="qr"></div>
        </div>
    </div>
    <div class="scrollbar"></div>
</div>

    <div class="section">
        <div class="article">
    <div class='main'>
        <h1 class="title">IP地址扫描</h1>
        <div class="stuff">
            <span>三月 28, 2020</span>
            
  <ul class="post-tags-list" itemprop="keywords"><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/Language/" rel="tag">Language</a></li></ul>


        </div>
        <div class="content markdown">
            <h3 id="IP地址扫描———多线程和单线程"><a href="#IP地址扫描———多线程和单线程" class="headerlink" title="IP地址扫描———多线程和单线程"></a>IP地址扫描———多线程和单线程</h3><h5 id="布局界面及代码"><a href="#布局界面及代码" class="headerlink" title="布局界面及代码"></a>布局界面及代码</h5><blockquote>
<p>界面如下<br><img src="https://img-blog.csdnimg.cn/20200328092157499.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1YW5fcWlhbzkyNQ==,size_16,color_FFFFFF,t_70" alt="布局界面"></p>
</blockquote>
<pre class=" language-bash"><code class="language-bash"><span class="token operator">&lt;</span>Window x:Class<span class="token operator">=</span><span class="token string">"IP地址扫描.MainWindow"</span>
        xmlns<span class="token operator">=</span><span class="token string">"http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span>
        xmlns:x<span class="token operator">=</span><span class="token string">"http://schemas.microsoft.com/winfx/2006/xaml"</span>
        xmlns:d<span class="token operator">=</span><span class="token string">"http://schemas.microsoft.com/expression/blend/2008"</span>
        xmlns:mc<span class="token operator">=</span><span class="token string">"http://schemas.openxmlformats.org/markup-compatibility/2006"</span>
        xmlns:local<span class="token operator">=</span><span class="token string">"clr-namespace:IP地址扫描"</span>
        mc:Ignorable<span class="token operator">=</span><span class="token string">"d"</span>
        Title<span class="token operator">=</span><span class="token string">"IP扫描"</span> Height<span class="token operator">=</span><span class="token string">"450"</span> Width<span class="token operator">=</span><span class="token string">"800"</span>
        WindowStartupLocation<span class="token operator">=</span><span class="token string">"CenterScreen"</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>Window.Resources<span class="token operator">></span>
        <span class="token operator">&lt;</span>Style TargetType<span class="token operator">=</span><span class="token string">"TextBox"</span><span class="token operator">></span>
            <span class="token operator">&lt;</span>Setter Property<span class="token operator">=</span><span class="token string">"VerticalAlignment"</span> Value<span class="token operator">=</span><span class="token string">"Center"</span>/<span class="token operator">></span>
            <span class="token operator">&lt;</span>Setter Property<span class="token operator">=</span><span class="token string">"HorizontalContentAlignment"</span> Value<span class="token operator">=</span><span class="token string">"Center"</span>/<span class="token operator">></span>
            <span class="token operator">&lt;</span>Setter Property<span class="token operator">=</span><span class="token string">"Padding"</span> Value<span class="token operator">=</span><span class="token string">" 5 0 5 0 "</span>/<span class="token operator">></span>
            <span class="token operator">&lt;</span>EventSetter Event<span class="token operator">=</span><span class="token string">"TextChanged"</span> Handler<span class="token operator">=</span><span class="token string">"TextBox_TextChanged"</span>/<span class="token operator">></span>
        <span class="token operator">&lt;</span>/Style<span class="token operator">></span>
    <span class="token operator">&lt;</span>/Window.Resources<span class="token operator">></span>
    <span class="token operator">&lt;</span>Grid<span class="token operator">></span>
        <span class="token operator">&lt;</span>Grid.RowDefinitions<span class="token operator">></span>
            <span class="token operator">&lt;</span>RowDefinition Height<span class="token operator">=</span><span class="token string">"Auto"</span>/<span class="token operator">></span>
            <span class="token operator">&lt;</span>RowDefinition Height<span class="token operator">=</span><span class="token string">"Auto"</span>/<span class="token operator">></span>
            <span class="token operator">&lt;</span>RowDefinition/<span class="token operator">></span>
        <span class="token operator">&lt;</span>/Grid.RowDefinitions<span class="token operator">></span>
        <span class="token operator">&lt;</span>GroupBox Grid.Row<span class="token operator">=</span><span class="token string">"0"</span> Header<span class="token operator">=</span><span class="token string">"扫描的IP地址范围"</span> VerticalContentAlignment<span class="token operator">=</span><span class="token string">"Center"</span> Padding<span class="token operator">=</span><span class="token string">"10"</span><span class="token operator">></span>
            <span class="token operator">&lt;</span>DockPanel<span class="token operator">></span>
                <span class="token operator">&lt;</span>Label DockPanel.Dock<span class="token operator">=</span><span class="token string">"Left"</span> Content<span class="token operator">=</span><span class="token string">"地址前缀："</span>/<span class="token operator">></span>
                <span class="token operator">&lt;</span>TextBox Name<span class="token operator">=</span><span class="token string">"txt1"</span> FontSize<span class="token operator">=</span><span class="token string">"20"</span> Text<span class="token operator">=</span><span class="token string">""</span> Width<span class="token operator">=</span><span class="token string">"100"</span>/<span class="token operator">></span>
                <span class="token operator">&lt;</span>Label Content<span class="token operator">=</span><span class="token string">"起始值："</span> Margin<span class="token operator">=</span><span class="token string">"15 0 0 0"</span>/<span class="token operator">></span>
                <span class="token operator">&lt;</span>TextBox Name<span class="token operator">=</span><span class="token string">"txtStart"</span> Text<span class="token operator">=</span><span class="token string">""</span> FontSize<span class="token operator">=</span><span class="token string">"22"</span> Margin<span class="token operator">=</span><span class="token string">"0,4,0,0"</span> VerticalAlignment<span class="token operator">=</span><span class="token string">"Top"</span> Width<span class="token operator">=</span><span class="token string">"60"</span>/<span class="token operator">></span>
                <span class="token operator">&lt;</span>Label Content<span class="token operator">=</span><span class="token string">"终止值："</span> Margin<span class="token operator">=</span><span class="token string">"15 0 0 0"</span>/<span class="token operator">></span>
                <span class="token operator">&lt;</span>TextBox Name<span class="token operator">=</span><span class="token string">"txtEnd"</span> Text<span class="token operator">=</span><span class="token string">""</span> FontSize<span class="token operator">=</span><span class="token string">"22"</span> Width<span class="token operator">=</span><span class="token string">"60"</span>/<span class="token operator">></span>
                <span class="token operator">&lt;</span>Button Name<span class="token operator">=</span><span class="token string">"btn1"</span> Width<span class="token operator">=</span><span class="token string">"95"</span> VerticalAlignment<span class="token operator">=</span><span class="token string">"Center"</span>   Margin<span class="token operator">=</span><span class="token string">"80 5 0 5 "</span>  FontSize<span class="token operator">=</span><span class="token string">"22"</span> Content<span class="token operator">=</span><span class="token string">"单线程"</span> Click<span class="token operator">=</span><span class="token string">"btn1_Click"</span> /<span class="token operator">></span>
                <span class="token operator">&lt;</span>Button Name<span class="token operator">=</span><span class="token string">"btn2"</span> Width<span class="token operator">=</span><span class="token string">"95"</span> VerticalAlignment<span class="token operator">=</span><span class="token string">"Center"</span> FontSize<span class="token operator">=</span><span class="token string">"22"</span>  Margin<span class="token operator">=</span><span class="token string">"20,5,0,5"</span>  Content<span class="token operator">=</span><span class="token string">"多线程"</span> Click<span class="token operator">=</span><span class="token string">"btn2_Click"</span> /<span class="token operator">></span>
            <span class="token operator">&lt;</span>/DockPanel<span class="token operator">></span>
        <span class="token operator">&lt;</span>/GroupBox<span class="token operator">></span>
        <span class="token operator">&lt;</span>Label Name<span class="token operator">=</span><span class="token string">"labelError"</span> Grid.Row<span class="token operator">=</span><span class="token string">"1"</span> Content<span class="token operator">=</span><span class="token string">"IP地址有错，请更正！"</span> HorizontalContentAlignment<span class="token operator">=</span><span class="token string">"Center"</span> Background<span class="token operator">=</span><span class="token string">"Red"</span> Foreground<span class="token operator">=</span><span class="token string">"White"</span>/<span class="token operator">></span>
        <span class="token operator">&lt;</span>GroupBox Grid.Row<span class="token operator">=</span><span class="token string">"2"</span> Header<span class="token operator">=</span><span class="token string">"扫描信息"</span><span class="token operator">></span>
            <span class="token operator">&lt;</span>ListBox x:Name<span class="token operator">=</span><span class="token string">"listBoxInfo"</span>/<span class="token operator">></span>
        <span class="token operator">&lt;</span>/GroupBox<span class="token operator">></span>
    <span class="token operator">&lt;</span>/Grid<span class="token operator">></span>
<span class="token operator">&lt;</span>/Window<span class="token operator">></span>
</code></pre>
<h5 id="后台执行代码"><a href="#后台执行代码" class="headerlink" title="后台执行代码"></a>后台执行代码</h5><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Diagnostics<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Linq<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Net<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Text<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Threading<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Threading<span class="token punctuation">.</span>Tasks<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Windows<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Controls<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Data<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Documents<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Input<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Media<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Media<span class="token punctuation">.</span>Imaging<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Navigation<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Shapes<span class="token punctuation">;</span>

<span class="token keyword">namespace</span> IP地址扫描
<span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">/// &lt;summary></span>
    <span class="token comment" spellcheck="true">/// MainWindow.xaml 的交互逻辑</span>
    <span class="token comment" spellcheck="true">/// &lt;/summary></span>
    <span class="token keyword">public</span> <span class="token keyword">partial</span> <span class="token keyword">class</span> <span class="token class-name">MainWindow</span> <span class="token punctuation">:</span> Window
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token function">MainWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token function">InitializeComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            labelError<span class="token punctuation">.</span>Visibility <span class="token operator">=</span> System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Visibility<span class="token punctuation">.</span>Collapsed<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment" spellcheck="true">//声明一个字符串用于后续输出</span>
        String s <span class="token operator">=</span> <span class="token string">"扫描地址：{0}，扫描时间：{1}毫秒，主机名称：{2}"</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">/// &lt;summary></span>
        <span class="token comment" spellcheck="true">/// 输入时判断输入的IP地址是否有错，自动检验</span>
        <span class="token comment" spellcheck="true">/// &lt;/summary></span>
        <span class="token comment" spellcheck="true">/// &lt;param name="sender">&lt;/param></span>
        <span class="token comment" spellcheck="true">/// &lt;param name="e">&lt;/param></span>
        <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">TextBox_TextChanged</span><span class="token punctuation">(</span><span class="token keyword">object</span> sender<span class="token punctuation">,</span> TextChangedEventArgs e<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">string</span> str1 <span class="token operator">=</span> txt1<span class="token punctuation">.</span>Text <span class="token operator">+</span> txtStart<span class="token punctuation">.</span>Text<span class="token punctuation">;</span>
            <span class="token keyword">string</span> str2 <span class="token operator">=</span> txt1<span class="token punctuation">.</span>Text <span class="token operator">+</span> txtEnd<span class="token punctuation">.</span>Text<span class="token punctuation">;</span>
            IPAddress ip1<span class="token punctuation">,</span> ip2<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>IPAddress<span class="token punctuation">.</span><span class="token function">TryParse</span><span class="token punctuation">(</span>str1<span class="token punctuation">,</span> <span class="token keyword">out</span> ip1<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">false</span> <span class="token operator">||</span> <span class="token keyword">false</span> <span class="token operator">==</span>IPAddress<span class="token punctuation">.</span><span class="token function">TryParse</span><span class="token punctuation">(</span>str2<span class="token punctuation">,</span> <span class="token keyword">out</span> ip2<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                labelError<span class="token punctuation">.</span>Visibility <span class="token operator">=</span> System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Visibility<span class="token punctuation">.</span>Visible<span class="token punctuation">;</span>
                btn1<span class="token punctuation">.</span>IsEnabled <span class="token operator">=</span> <span class="token keyword">false</span><span class="token punctuation">;</span>
                btn2<span class="token punctuation">.</span>IsEnabled <span class="token operator">=</span> <span class="token keyword">false</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">else</span>
            <span class="token punctuation">{</span>
                labelError<span class="token punctuation">.</span>Visibility <span class="token operator">=</span> System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Visibility<span class="token punctuation">.</span>Collapsed<span class="token punctuation">;</span>
                btn1<span class="token punctuation">.</span>IsEnabled <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">;</span>
                btn2<span class="token punctuation">.</span>IsEnabled <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        Stopwatch qiao<span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//多线程</span>
        <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">btn2_Click</span><span class="token punctuation">(</span><span class="token keyword">object</span> sender<span class="token punctuation">,</span> RoutedEventArgs e<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            btn1<span class="token punctuation">.</span>IsEnabled <span class="token operator">=</span> <span class="token keyword">false</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> start <span class="token operator">=</span> <span class="token keyword">int</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>txtStart<span class="token punctuation">.</span>Text<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> end <span class="token operator">=</span> <span class="token keyword">int</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>txtEnd<span class="token punctuation">.</span>Text<span class="token punctuation">)</span><span class="token punctuation">;</span>
            count <span class="token operator">=</span> end <span class="token operator">-</span> start <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>start <span class="token operator">></span> end<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                MessageBox<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token string">"终止值必须大于等于起始值"</span><span class="token punctuation">,</span> <span class="token string">"地址范围有错"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            listBoxInfo<span class="token punctuation">.</span>Items<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            qiao <span class="token operator">=</span> Stopwatch<span class="token punctuation">.</span><span class="token function">StartNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> start<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> end<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">string</span> strip <span class="token operator">=</span> txt1<span class="token punctuation">.</span>Text <span class="token operator">+</span> i<span class="token punctuation">;</span>
                Thread t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>Scan<span class="token punctuation">)</span><span class="token punctuation">;</span>
                t<span class="token punctuation">.</span><span class="token function">Start</span><span class="token punctuation">(</span>strip<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token comment" spellcheck="true">//单线程</span>
        <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">btn1_Click</span><span class="token punctuation">(</span><span class="token keyword">object</span> sender<span class="token punctuation">,</span> RoutedEventArgs e<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            btn2<span class="token punctuation">.</span>IsEnabled <span class="token operator">=</span> <span class="token keyword">false</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> start <span class="token operator">=</span> <span class="token keyword">int</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>txtStart<span class="token punctuation">.</span>Text<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> end <span class="token operator">=</span> <span class="token keyword">int</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>txtEnd<span class="token punctuation">.</span>Text<span class="token punctuation">)</span><span class="token punctuation">;</span>
            count <span class="token operator">=</span> end <span class="token operator">-</span> start <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>start <span class="token operator">></span> end<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                MessageBox<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token string">"终止值必须大于等于起始值"</span><span class="token punctuation">,</span> <span class="token string">"地址范围有错"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            listBoxInfo<span class="token punctuation">.</span>Items<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            qiao <span class="token operator">=</span> Stopwatch<span class="token punctuation">.</span><span class="token function">StartNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> start<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> end<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">string</span> strip <span class="token operator">=</span> txt1<span class="token punctuation">.</span>Text <span class="token operator">+</span> i<span class="token punctuation">;</span>
                <span class="token function">Scan</span><span class="token punctuation">(</span>strip<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token comment" spellcheck="true">//计数器</span>
        <span class="token keyword">int</span> num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token keyword">object</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">Scan</span><span class="token punctuation">(</span><span class="token keyword">object</span> ip<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            Stopwatch duan <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stopwatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            duan <span class="token operator">=</span> Stopwatch<span class="token punctuation">.</span><span class="token function">StartNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">string</span> host <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span>
            <span class="token punctuation">{</span>
                host <span class="token operator">=</span> Dns<span class="token punctuation">.</span><span class="token function">GetHostEntry</span><span class="token punctuation">(</span>ip<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>HostName<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">catch</span>
            <span class="token punctuation">{</span>
                host <span class="token operator">=</span> <span class="token string">"(不在线)"</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            duan<span class="token punctuation">.</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            listBoxInfo<span class="token punctuation">.</span>Dispatcher<span class="token punctuation">.</span><span class="token function">Invoke</span><span class="token punctuation">(</span>
                <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> listBoxInfo<span class="token punctuation">.</span>Items<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>
                    String<span class="token punctuation">.</span><span class="token function">Format</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> ip<span class="token punctuation">,</span> duan<span class="token punctuation">.</span>ElapsedMilliseconds<span class="token punctuation">,</span> host<span class="token punctuation">)</span>
                    <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//总时间</span>
            <span class="token keyword">lock</span> <span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                num<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">==</span> count<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                qiao<span class="token punctuation">.</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                listBoxInfo<span class="token punctuation">.</span>Dispatcher<span class="token punctuation">.</span><span class="token function">Invoke</span><span class="token punctuation">(</span>
                    <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>listBoxInfo<span class="token punctuation">.</span>Items<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"总计耗时："</span> <span class="token operator">+</span> qiao<span class="token punctuation">.</span>ElapsedMilliseconds<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h5 id="效果展示"><a href="#效果展示" class="headerlink" title="效果展示"></a>效果展示</h5><ul>
<li>地址前缀输入的是    “xxx.xxx.xxx. “;比如你要检测从192.168.1.1到192.168.1.150,那么地址前缀输入 “192.168.1.”，在起始值输入1,在终止值输入150。</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/2020032809251886.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1YW5fcWlhbzkyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<ul>
<li>会自动监测不和法IP地址，并给出提示</li>
<li>单线程会出现阻塞的情况，即程序运行结束前无法移动界面，导致卡死假象。（正常情况就应该是这样的）</li>
<li>当进行单线程时，多线程按钮自动失效（不能点击）；当进行多线程时，单线程按钮自动失效。</li>
</ul>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls" data-autoplay="false">
                <source type="audio/mpeg" src="">
            </audio>
            
                <ul id="audio-list" style="display:none">
                    
                        
                            <li title='0' data-url='http://link.hhtjim.com/163/425570952.mp3'></li>
                        
                    
                        
                            <li title='1' data-url='http://link.hhtjim.com/163/425570952.mp3'></li>
                        
                    
                </ul>
            
        </div>
        
    <div id='gitalk-container' class="comment link"
		data-enable='false'
        data-ae='false'
        data-ci=''
        data-cs=''
        data-r=''
        data-o=''
        data-a=''
        data-d='false'
    >查看评论</div>


    </div>
    
</div>


    </div>
</div>
</body>


<script src="//lib.baomitu.com/jquery/1.8.3/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/typed.js"></script>
<script src="/js/diaspora.js"></script>


<link rel="stylesheet" href="/photoswipe/photoswipe.css">
<link rel="stylesheet" href="/photoswipe/default-skin/default-skin.css">


<script src="/photoswipe/photoswipe.min.js"></script>
<script src="/photoswipe/photoswipe-ui-default.min.js"></script>


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>






</html>
